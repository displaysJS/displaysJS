var Displays=function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"undefined";n(this,e),this.action=t,this.args=i,this.name=r}return r(e,[{key:"toString",value:function(){return"TimeAction:("+this.name+")"}},{key:"trigger",value:function(){console.log(this,this.args),this.action.apply(this,this.args)}}]),e}(),o=function(){function e(t){n(this,e),this.time_actions={},this.name=t.name||"undefined",this.treshold=t.treshold||5}return r(e,[{key:"toString",value:function(){return"("+this.name+")"}},{key:"addTimeAction",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"undefined";"[object Array]"!==Object.prototype.toString.call(i)&&(i=[i]),this.time_actions[e]=new s(t,i,n)}},{key:"callTimeAction",value:function(e){this.time_actions.hasOwnProperty(e)&&this.time_actions[e].trigger()}},{key:"callNearestTimeAction",value:function(e){var t;"NOTFOUND"!=(t=this.time_actions.hasOwnProperty(e)?e:this.getNearestTime(e))&&this.time_actions.hasOwnProperty(t)&&this.time_actions[t].trigger()}},{key:"getNearestTime",value:function(e){for(var t=1;t<this.treshold;t++){if(this.time_actions.hasOwnProperty(e+t))return e+t;if(this.time_actions.hasOwnProperty(e-t))return e-t}return"NOTFOUND"}}]),e}();e.exports={Timeline:o,TimeAction:s}},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(0),o=i(2),a=function(){function e(t){n(this,e),this.context={time:0,duration:t.duration||0,emitter:new o.EventEmitter2({maxListeners:14})},this.stage=t.stage||{add:function(e){}},this.name=t.name||"undefined",this.timeline=new s.Timeline({name:this.name+"-timeline",treshold:t.timeline_treshold}),this.displays=t.displays,this.displays_not_ready=[],void 0!=t.primary_display&&t.primary_display.setAsPrimaryDisplay();for(var i in this.displays)this.displays[i].setContext(this.context),this.displays[i].ready()||this.displays_not_ready.push(this.displays[i]);this.context.emitter.on("tick",this.handleTick.bind(this)),this.context.emitter.on("pause",this.pausePerformance.bind(this)),this.context.emitter.on("continue",this.continuePerformance.bind(this)),this.context.emitter.on("ready",this.checkAllReady.bind(this))}return r(e,[{key:"toString",value:function(){return"("+this.name+")"}},{key:"checkAllReady",value:function(){for(var e in this.displays_not_ready)this.displays_not_ready[e].ready()&&this.displays_not_ready.splice(e,1);0==this.displays_not_ready.length&&this.context.emitter.emit("all_ready")}},{key:"allReady",value:function(){return 0==this.displays_not_ready.length}},{key:"tick",value:function(){this.context.time+=1,this.context.emitter.emit("tick")}},{key:"handleTick",value:function(){this.timeline.callTimeAction(this.context.time)}},{key:"seek",value:function(e){this.context.time=e,this.context.emitter.emit("tick")}},{key:"perform",value:function(){function e(){for(var e in this.displays){var t=this.displays[e].render();void 0!=t&&this.stage.add(t),this.displays[e].play()}}for(var t in this.displays)this.displays[t].setup();this.allReady()?e.bind(this)():this.context.emitter.on("all_ready",e.bind(this))}},{key:"continuePerformance",value:function(){for(var e in this.displays)this.displays[e].play()}},{key:"pausePerformance",value:function(){for(var e in this.displays)this.displays[e].pause()}},{key:"stopPerformance",value:function(){this.seek(0);for(var e in this.displays)this.displays[e].reset()}}]),e}();e.exports={DisplayCoordinator:a}},function(e,t,i){"use strict";(function(n){var r,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o){function a(){this._events={},this._conf&&l.call(this,this._conf)}function l(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==o?e.maxListeners:p,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=p}function c(e,t){var i="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(i+=" Event name: "+t+"."),void 0!==n&&n.emitWarning){var r=new Error(i);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=e,n.emitWarning(r)}else console.error(i),console.trace&&console.trace()}function h(e){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,l.call(this,e)}function u(e,t,i,n){if(!i)return[];var r,s,o,a,l,c,h,f=[],y=t.length,p=t[n],d=t[n+1];if(n===y&&i._listeners){if("function"==typeof i._listeners)return e&&e.push(i._listeners),[i];for(r=0,s=i._listeners.length;r<s;r++)e&&e.push(i._listeners[r]);return[i]}if("*"===p||"**"===p||i[p]){if("*"===p){for(o in i)"_listeners"!==o&&i.hasOwnProperty(o)&&(f=f.concat(u(e,t,i[o],n+1)));return f}if("**"===p){h=n+1===y||n+2===y&&"*"===d,h&&i._listeners&&(f=f.concat(u(e,t,i,y)));for(o in i)"_listeners"!==o&&i.hasOwnProperty(o)&&("*"===o||"**"===o?(i[o]._listeners&&!h&&(f=f.concat(u(e,t,i[o],y))),f=f.concat(u(e,t,i[o],n))):f=o===d?f.concat(u(e,t,i[o],n+2)):f.concat(u(e,t,i[o],n)));return f}f=f.concat(u(e,t,i[p],n+1))}if(a=i["*"],a&&u(e,t,a,n+1),l=i["**"])if(n<y){l._listeners&&u(e,t,l,y);for(o in l)"_listeners"!==o&&l.hasOwnProperty(o)&&(o===d?u(e,t,l[o],n+2):o===p?u(e,t,l[o],n+1):(c={},c[o]=l[o],u(e,t,{"**":c},n+1)))}else l._listeners?u(e,t,l,y):l["*"]&&l["*"]._listeners&&u(e,t,l["*"],y);return f}function f(e,t){e="string"==typeof e?e.split(this.delimiter):e.slice();for(var i=0,n=e.length;i+1<n;i++)if("**"===e[i]&&"**"===e[i+1])return;for(var r=this.listenerTree,s=e.shift();s!==o;){if(r[s]||(r[s]={}),r=r[s],0===e.length)return r._listeners?("function"==typeof r._listeners&&(r._listeners=[r._listeners]),r._listeners.push(t),!r._listeners.warned&&this._maxListeners>0&&r._listeners.length>this._maxListeners&&(r._listeners.warned=!0,c.call(this,r._listeners.length,s))):r._listeners=t,!0;s=e.shift()}return!0}var y=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},p=10;h.EventEmitter2=h,h.prototype.delimiter=".",h.prototype.setMaxListeners=function(e){e!==o&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},h.prototype.event="",h.prototype.once=function(e,t){return this._once(e,t,!1)},h.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},h.prototype._once=function(e,t,i){return this._many(e,1,t,i),this},h.prototype.many=function(e,t,i){return this._many(e,t,i,!1)},h.prototype.prependMany=function(e,t,i){return this._many(e,t,i,!0)},h.prototype._many=function(e,t,i,n){function r(){return 0==--t&&s.off(e,r),i.apply(this,arguments)}var s=this;if("function"!=typeof i)throw new Error("many only accepts instances of Function");return r._origin=i,this._on(e,r,n),s},h.prototype.emit=function(){this._events||a.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;var t,i,n,r,s,o=arguments.length;if(this._all&&this._all.length){if(s=this._all.slice(),o>3)for(t=new Array(o),r=0;r<o;r++)t[r]=arguments[r];for(n=0,i=s.length;n<i;n++)switch(this.event=e,o){case 1:s[n].call(this,e);break;case 2:s[n].call(this,e,arguments[1]);break;case 3:s[n].call(this,e,arguments[1],arguments[2]);break;default:s[n].apply(this,t)}}if(this.wildcard){s=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();u.call(this,s,l,this.listenerTree,0)}else{if("function"==typeof(s=this._events[e])){switch(this.event=e,o){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(o-1),r=1;r<o;r++)t[r-1]=arguments[r];s.apply(this,t)}return!0}s&&(s=s.slice())}if(s&&s.length){if(o>3)for(t=new Array(o-1),r=1;r<o;r++)t[r-1]=arguments[r];for(n=0,i=s.length;n<i;n++)switch(this.event=e,o){case 1:s[n].call(this);break;case 2:s[n].call(this,arguments[1]);break;case 3:s[n].call(this,arguments[1],arguments[2]);break;default:s[n].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},h.prototype.emitAsync=function(){this._events||a.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,i,n,r,s,o=[],l=arguments.length;if(this._all){if(l>3)for(t=new Array(l),r=1;r<l;r++)t[r]=arguments[r];for(n=0,i=this._all.length;n<i;n++)switch(this.event=e,l){case 1:o.push(this._all[n].call(this,e));break;case 2:o.push(this._all[n].call(this,e,arguments[1]));break;case 3:o.push(this._all[n].call(this,e,arguments[1],arguments[2]));break;default:o.push(this._all[n].apply(this,t))}}if(this.wildcard){s=[];var c="string"==typeof e?e.split(this.delimiter):e.slice();u.call(this,s,c,this.listenerTree,0)}else s=this._events[e];if("function"==typeof s)switch(this.event=e,l){case 1:o.push(s.call(this));break;case 2:o.push(s.call(this,arguments[1]));break;case 3:o.push(s.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(l-1),r=1;r<l;r++)t[r-1]=arguments[r];o.push(s.apply(this,t))}else if(s&&s.length){if(s=s.slice(),l>3)for(t=new Array(l-1),r=1;r<l;r++)t[r-1]=arguments[r];for(n=0,i=s.length;n<i;n++)switch(this.event=e,l){case 1:o.push(s[n].call(this));break;case 2:o.push(s[n].call(this,arguments[1]));break;case 3:o.push(s[n].call(this,arguments[1],arguments[2]));break;default:o.push(s[n].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(o)},h.prototype.on=function(e,t){return this._on(e,t,!1)},h.prototype.prependListener=function(e,t){return this._on(e,t,!0)},h.prototype.onAny=function(e){return this._onAny(e,!1)},h.prototype.prependAny=function(e){return this._onAny(e,!0)},h.prototype.addListener=h.prototype.on,h.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},h.prototype._on=function(e,t,i){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||a.call(this),this.emit("newListener",e,t),this.wildcard?(f.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),i?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,c.call(this,this._events[e].length,e))):this._events[e]=t,this)},h.prototype.off=function(e,t){function i(e){if(e!==o){var t=Object.keys(e);for(var n in t){var r=t[n],a=e[r];a instanceof Function||"object"!==(void 0===a?"undefined":s(a))||null===a||(Object.keys(a).length>0&&i(e[r]),0===Object.keys(a).length&&delete e[r])}}}if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var a="string"==typeof e?e.split(this.delimiter):e.slice();r=u.call(this,null,a,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var l=0;l<r.length;l++){var c=r[l];if(n=c._listeners,y(n)){for(var h=-1,f=0,p=n.length;f<p;f++)if(n[f]===t||n[f].listener&&n[f].listener===t||n[f]._origin&&n[f]._origin===t){h=f;break}if(h<0)continue;return this.wildcard?c._listeners.splice(h,1):this._events[e].splice(h,1),0===n.length&&(this.wildcard?delete c._listeners:delete this._events[e]),this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete c._listeners:delete this._events[e],this.emit("removeListener",e,t))}return i(this.listenerTree),this},h.prototype.offAny=function(e){var t,i=0,n=0;if(e&&this._all&&this._all.length>0){for(t=this._all,i=0,n=t.length;i<n;i++)if(e===t[i])return t.splice(i,1),this.emit("removeListenerAny",e),this}else{for(t=this._all,i=0,n=t.length;i<n;i++)this.emit("removeListenerAny",t[i]);this._all=[]}return this},h.prototype.removeListener=h.prototype.off,h.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||a.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),i=u.call(this,null,t,this.listenerTree,0),n=0;n<i.length;n++){var r=i[n];r._listeners=null}else this._events&&(this._events[e]=null);return this},h.prototype.listeners=function(e){if(this.wildcard){var t=[],i="string"==typeof e?e.split(this.delimiter):e.slice();return u.call(this,t,i,this.listenerTree,0),t}return this._events||a.call(this),this._events[e]||(this._events[e]=[]),y(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},h.prototype.eventNames=function(){return Object.keys(this._events)},h.prototype.listenerCount=function(e){return this.listeners(e).length},h.prototype.listenersAny=function(){return this._all?this._all:[]},(r=function(){return h}.call(t,i,t,e))!==o&&(e.exports=r)}()}).call(t,i(3))},function(e,t,i){"use strict";function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function s(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){m&&p&&(m=!1,p.length?d=p.concat(d):v=-1,d.length&&l())}function l(){if(!m){var e=s(a);m=!0;for(var t=d.length;t;){for(p=d,d=[];++v<t;)p&&p[v].run();v=-1,t=d.length}p=null,m=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function h(){}var u,f,y=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var p,d=[],m=!1,v=-1;y.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];d.push(new c(e,t)),1!==d.length||m||s(l)},c.prototype.run=function(){this.fun.apply(null,this.array)},y.title="browser",y.browser=!0,y.env={},y.argv=[],y.version="",y.versions={},y.on=h,y.addListener=h,y.once=h,y.off=h,y.removeListener=h,y.removeAllListeners=h,y.emit=h,y.prependListener=h,y.prependOnceListener=h,y.listeners=function(e){return[]},y.binding=function(e){throw new Error("process.binding is not supported")},y.cwd=function(){return"/"},y.chdir=function(e){throw new Error("process.chdir is not supported")},y.umask=function(){return 0}},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(0),o={NORMAL:0,USER:1},a=function(){function e(t){n(this,e),this.context=t.context||void 0,this.name=t.name||"undefined",this.timeline=new s.Timeline({name:this.name+"-timeline",treshold:t.timeline_treshold}),this.is_primary_display=!1,this.mode=o.NORMAL,this.m_ready=!1}return r(e,[{key:"toString",value:function(){return"("+this.name+")"}},{key:"setContext",value:function(e){this.context=e,this.context.emitter.on("tick",this.handleTick.bind(this)),this.context.emitter.on("pause",this.handlePause.bind(this)),this.context.emitter.on("continue",this.handleContinue.bind(this))}},{key:"setAsReady",value:function(){this.m_ready=!0,void 0!=this.context&&this.context.emitter.emit("ready")}},{key:"ready",value:function(){return this.m_ready}},{key:"setAsPrimaryDisplay",value:function(){this.is_primary_display=!0}},{key:"isPrimaryDisplay",value:function(){return!!this.is_primary_display}},{key:"tick",value:function(){this.isPrimaryDisplay()&&(this.context.emitter.emit("tick"),this.context.time+=1)}},{key:"seek",value:function(e){this.timeline.callTimeAction(e)}},{key:"enableUserMode",value:function(){return this.mode=o.USER}},{key:"releaseUserMode",value:function(){return this.mode=o.NORMAL}},{key:"isInUserMode",value:function(){return this.mode==o.USER}},{key:"handleTick",value:function(){this.timeline.callTimeAction(this.context.time)}},{key:"handlePause",value:function(){}},{key:"handleContinue",value:function(){}},{key:"setup",value:function(){}},{key:"render",value:function(){}},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"reset",value:function(){}}]),e}();e.exports={Display:a}},function(e,t,i){e.exports=i(6)},function(e,t,i){"use strict";var n=i(0),r=i(1),s=i(4);e.exports={Timeline:n.Timeline,DisplayCoordinator:r.DisplayCoordinator,Display:s.Display}}]);